# Содержание
- [Повторение](#повторение)
- [Таблицы](#таблицы)
  - [В Python](#в-python)
- [Задания](#задания)
  - [Задание 1](#задание-1)
  - [Задание 2 (4 балла)](#задание-2-4-балла)
  - [Задание 3 (4 балла)](#задание-3-4-балла)

# Повторение

<details id="todo-code">
<summary>Полное решение Задания 4 с прошлого занятия</summary>

```python
with open("todo.txt", "a") as f:
    f.write("")


def show():
    with open("todo.txt", "r") as f:
        lines = f.readlines()
        c = 1
        for a in lines:
            s = a.strip().split("|")
            if s[0] == "todo":
                print(c, s[1])
            c += 1


def show_all():
    with open("todo.txt", "r") as f:
        lines = f.readlines()
        c = 1
        for a in lines:
            s = a.strip().split("|")
            print(f"{s[0]} {c}: {s[1]}")
            c += 1


def done(line):
    lines = []
    with open("todo.txt", "r") as f:
        lines = f.readlines()
    with open("todo.txt", "w") as f:
        for i in range(len(lines)):
            if i + 1 == line:
                s = lines[i].split("|")
                f.write("done|" + s[1])
            else:
                f.write(lines[i])


def todo(st):
    with open("todo.txt", "a") as f:
        print(f"todo|{st}", file=f)


show()

while True:
    command = input()
    s = command.split()
    if len(s) == 1 and s[0] == "show":
        show()
    elif len(s) == 2 and s[0] == "show" and s[1] == "all":
        show_all()
    elif len(s) == 2 and s[0] == "done":
        done(int(s[1]))
    elif len(s) > 1 and s[0] == "todo":
        todo(command[5:].strip())
    else:
        print("Команда не распознана")

```

</details>

# Таблицы

Таблица — это данные, которые одновременно сгруппированы по строкам и столбцам. Таблицы много где используются в том или ином виде. Один из простейших способов хранить таблицы на компьютере - CSV.

CSV (от англ. Comma-Separated Values — значения, разделённые запятыми) — текстовый формат, предназначенный для представления табличных данных. Строка таблицы соответствует строке текста, которая содержит одно или несколько полей, разделенных запятыми. \[[Википедия](https://ru.wikipedia.org/wiki/CSV)\]

Пример CSV:

```
год,режиссер,название
1920,Роберт Вине,Кабинет доктора Калигари
1940,Чарльз Чаплин,Великий диктатор
1959,Ален Рене,"Хиросима, моя любовь"
1968,Стэнли Кубрик,2001 год: Космическая одиссея
```

Соответствующая таблица:

|год |режиссер     |название                     |
|----|-------------|-----------------------------|
|1920|Роберт Вине  |Кабинет доктора Калигари     |
|1940|Чарльз Чаплин|Великий диктатор             |
|1959|Ален Рене    |Хиросима, моя любовь         |
|1968|Стэнли Кубрик|2001 год: Космическая одиссея|

## В Python

Для работы с файлами CSV в Python есть специальный модуль. Он позволяет работать с файлами CSV, не задумываясь о том, что делать с запятыми внутри ячейки, а также поддерживает другие разделители.

Пример чтения файла csv:

```python
import csv

with open('file.csv', newline='') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        print(row)

# ['год', 'режиссер', 'название']
# ['1920', 'Роберт Вине', 'Кабинет доктора Калигари']
# ['1940', 'Чарльз Чаплин', 'Великий диктатор']
# ['1959', 'Ален Рене', 'Хиросима, моя любовь']
# ['1968', 'Стэнли Кубрик', '2001 год: Космическая одиссея']
```

Разберем по строкам:

1. `import csv` - подключить модуль для работы с файлами csv;
2. `with open('eggs.csv', newline='') as csvfile:` - файлы csv открываются как обычные файлы. `newline=''` означает, что *не нужно* добавлять перенос строки (`\n`) на конец каждой строки, и оно необходимо для работы `csv`.
3. `spamreader = csv.reader(csvfile)` - означает, что нужно создать "читатель" (`reader`) файла `csvfile`, и сохранить его в переменную `reader`. Дальше с помощью этой переменной можно будет читать содержимое файла, как csv.
4. `for row in reader:` - позволяет пройтись по каждой строке, одна за другой. В каждой итерации `row` - список значений из текущей строки. `reader` - особый объект, это не список, и получить длину всего файла просто так не получится.

Пример записи в файл csv:

```python
import csv
with open('file.csv', 'w', newline='') as csvfile:
    writer = csv.writer(csvfile)
    writer.writerow(['год', 'режиссер', 'название'])
    writer.writerow([1940, 'Чарльз Чаплин', 'Великий диктатор'])
    writer.writerow([1959, 'Ален Рене', 'Хиросима, моя любовь'])

# file.csv:
# год,режиссер,название
# 1940,Чарльз Чаплин,Великий диктатор
# 1959,Ален Рене,"Хиросима, моя любовь"
```

1. `with open('file.csv', 'w', newline='') as csvfile:` - так же как и с обычными файлами, чтобы записать в csv файл нужно указать букву `w`. И, как и в чтении csv нужно указать `newline=''`. Все содержимое файла будет перезаписано.
2. `writer = csv.writer(csvfile)` - создать "писатель" (writer) файла `csvfile` и сохранить его в переменную `writer`.
3. `writer.writerow([...])` - записать очередную строку в виде списка ячеек в таблицу файла `csvfile`.

#### Примечания

- Можно указать разделитель (`delimiter`) и/или символ кавычек (`quotechar`) при создании читателя или писателя: `csv.reader(csvfile, delimiter='|', quotechar="'")`, `csv.writer(csvfile, delimiter='|', quotechar="'")`. Код работы с CSV файлом при этом не изменится (т. е. также можно проходится по `reader` и использовать `writer.writerow([...])`).
- При использовании писателя также можно открыть файл на добавление `"a"` вместо чтения `"w"`. Тогда каждый `writer.writerow([...])` будет добавляться в конец файла.

# Задания

## Задание 1

#### Пункт 1 (2 балла)

Нужно написать программу, которая читает файл `todo.txt` (с прошлого занятия) и переводит содержимое в формат CSV, и сохраняет в файл `todo.csv`. Пример:

```
done|Задача 1
todo|Другая задача
todo|Каждая на своей строке
done|Осторожно, могут быть запятые
```

Должно перейти в

```
done,Задача 1
todo,Другая задача
todo,Каждая на своей строке
done,"Осторожно, могут быть запятые"
```

#### Пункт 2 (2 балла)

Используя [код прошлого занятия](#todo-code), переписать работу с файлом `todo.txt` на работу с файлом `todo.csv`. Для пользователя (того, кто вводит команды) не должно быть заметно, что программа изменилась, т. е. изменения происходят только в том, как программа хранит данные, и в каком файле.

## Задание 2 (4 балла)

В электронную таблицу занесли данные о тестировании 1000 учеников по выбранным ими предметам. Начало таблицы:

|округ|фамилия |предмет       |балл|
|-----|--------|--------------|----|
|С    |Ученик 1|физика        |240 |
|В    |Ученик 2|физкультура   |782 |
|Ю    |Ученик 3|биология      |361 |
|СВ   |Ученик 4|обществознание|377 |

Полную таблицу можно скачать здесь: [t2.csv](t2.csv). Сохраните таблицу, и используя Python, ответьте на вопросы:

- Определите, сколько учеников, которые проходили тестирование по информатике, набрали более 600 баллов.
- Найдите средний тестовый балл учеников, которые проходили тестирование по информатике.

## Задание 3 (4 балла)

В каждой строке электронной таблицы [t3.csv](t3.csv) записаны шесть натуральных чисел. Определите количество строк таблицы, содержащих числа, для которых одновременно выполнены все следующие условия:
- минимальное число встречается в строке ровно один раз;
- хотя бы одно число в строке повторяется более одного раза;
- максимальное число в строке превышает среднее арифметическое остальных пяти чисел этой строки более чем в три раза.
